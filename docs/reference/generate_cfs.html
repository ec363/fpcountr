<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate conversion factors for FP calibrations — generate_cfs • fpcountr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate conversion factors for FP calibrations — generate_cfs"><meta property="og:description" content="Generate conversion factors for FP calibrations. Originally based on
flopr::generate_cfs but with many changes. ... The original function was
intended for fluorescein and microspheres, this one can be used for any
fluorescent calibrant, including proteins. Takes as input a parsed csv of
fluorescence data of a dilution series of FPs at one or more gains, that
contains both data and metadata columns (including: instrument, plate, seal,
channel_name, channel_ex, channel_em, media, calibrant, protein, replicate,
volume, molecular_weight_gmol, concentration_ngul, dilution, rev_dilution,
well, the columns for the fluorescence data, row, column). ... A number of
arguments allow the tweaking of the original data set. Following this, the
data is reshaped, normalised, trimmed of saturated points, summarised and
used to fit a model for the conversion factors from arbitrary to absolute
units. Optional extras: the sensitivity_plots argument extends this
analysis to identify the limits of detection and relative sensitivity and
dynamic range of each gain. Plots are saved to record the processed data at
every step, allowing for visual sanity checks and troubleshooting. A csv file
with the fitted conversion factors is saved (along with the processed data if
requested with more_csvs)."><meta property="og:image" content="https://ec363.github.io/fpcountr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fpcountr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/fpcountr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ec363/fpcountr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate conversion factors for FP calibrations</h1>
    <small class="dont-index">Source: <a href="https://github.com/ec363/fpcountr/blob/HEAD/R/generate_cfs.R" class="external-link"><code>R/generate_cfs.R</code></a></small>
    <div class="hidden name"><code>generate_cfs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generate conversion factors for FP calibrations. Originally based on
<code><a href="https://rdrr.io/pkg/flopr/man/generate_cfs.html" class="external-link">flopr::generate_cfs</a></code> but with many changes. ... The original function was
intended for fluorescein and microspheres, this one can be used for any
fluorescent calibrant, including proteins. Takes as input a parsed csv of
fluorescence data of a dilution series of FPs at one or more gains, that
contains both data and metadata columns (including: instrument, plate, seal,
channel_name, channel_ex, channel_em, media, calibrant, protein, replicate,
volume, molecular_weight_gmol, concentration_ngul, dilution, rev_dilution,
well, the columns for the fluorescence data, row, column). ... A number of
arguments allow the tweaking of the original data set. Following this, the
data is reshaped, normalised, trimmed of saturated points, summarised and
used to fit a model for the conversion factors from arbitrary to absolute
units. Optional extras: the <code>sensitivity_plots</code> argument extends this
analysis to identify the limits of detection and relative sensitivity and
dynamic range of each gain. Plots are saved to record the processed data at
every step, allowing for visual sanity checks and troubleshooting. A csv file
with the fitted conversion factors is saved (along with the processed data if
requested with <code>more_csvs</code>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_cfs</span><span class="op">(</span></span>
<span>  <span class="va">calibration_csv</span>,</span>
<span>  more_csvs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  more_plots <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sensitivity_plots <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_only <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gain_fix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rename_from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rename_to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset_rows <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rows_to_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>,</span>
<span>  separator <span class="op">=</span> <span class="st">""</span>,</span>
<span>  complete_blank <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  outfolder <span class="op">=</span> <span class="st">"."</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>calibration_csv</dt>
<dd><p>character string. Path of the calibration data csv
file.</p></dd>


<dt>more_csvs</dt>
<dd><p>logical. Optionally save all the intermediate tables in this
function. Defaults to FALSE.</p></dd>


<dt>more_plots</dt>
<dd><p>logical. Optionally save more plots. Defaults to FALSE.</p></dd>


<dt>sensitivity_plots</dt>
<dd><p>logical. Optionally adds a few extra columns to the
data such as the min/max normalised fluorescence and detectable molecules.
It also plots a few extra plots. Defaults to FALSE.</p></dd>


<dt>include_only</dt>
<dd><p>character string. If specified, only includes the
measures (column names) specified here.</p></dd>


<dt>exclude</dt>
<dd><p>character string. If specified, excludes any measures (column
names) specified here.</p></dd>


<dt>gain_fix</dt>
<dd><p>logical. Optionally add "0" before 2-digit gain names ie "GFP
40" -&gt; "GFP 040", or "blueblue 40" -&gt; "blueblue 040"- which fixes ordering
of plots. Defaults to FALSE.</p></dd>


<dt>rename_from</dt>
<dd><p>character string. Rename measures (column names)
containing character string <code>rename_from</code> to character string specified in
<code>rename_to</code>. Both <code>rename_from</code> and <code>rename_to</code> need to be completed to
trigger renaming.</p></dd>


<dt>rename_to</dt>
<dd><p>character string. Rename measures (column names) containing
character string <code>rename_from</code> to character string specified in
<code>rename_to</code>. Both <code>rename_from</code> and <code>rename_to</code> need to be completed to
trigger renaming.</p></dd>


<dt>subset_rows</dt>
<dd><p>logical. Should script take a subset of the rows (or whole
table)? Defaults to FALSE.</p></dd>


<dt>rows_to_keep</dt>
<dd><p>character array. If <code>subset_rows</code> is TRUE, script will
choose rows to keep from this list. Defaults to <code>c("C","D")</code>.</p></dd>


<dt>separator</dt>
<dd><p>character string that represents the separator between the
channel name and the gain value in the measures columns, eg. for "GFP 40"
it is " ", for "GFP40" it is "" and for "GFP_40" it is "_". Required for
plotting the gain vs conversion factors. Defaults to "".</p></dd>


<dt>complete_blank</dt>
<dd><p>logical. Optionally adds "0" to the concentration_ngul
column for wells identified as blank (protein = "none"). Useful if data
layout is missing these values. Defaults to FALSE.</p></dd>


<dt>outfolder</dt>
<dd><p>character string. Path to folder where output files should
be saved. Defaults to current working directory.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">fitvals</span> <span class="op">&lt;-</span> <span class="fu">generate_cfs</span><span class="op">(</span>calibration_csv <span class="op">=</span> <span class="st">"data_parsed.csv"</span>, subset_rows <span class="op">=</span> <span class="cn">TRUE</span>, rows_to_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span>,<span class="st">"D"</span><span class="op">)</span>, outfolder <span class="op">=</span> <span class="st">"cfs_mCherry"</span><span class="op">)</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eszter Csibra.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>


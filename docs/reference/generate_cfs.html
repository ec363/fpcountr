<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generate conversion factors for fluorescent protein (FP) calibrations.
Originally based on flopr::generate_cfs() but with numerous changes. The
original function was intended for fluorescein and microsphere calibrations,
whereas this one can be used for any fluorescent calibrant, including
proteins. Takes as input a parsed CSV of fluorescence data of a dilution
series of FPs at one or more gains, that contains both data and metadata
columns (including: instrument, plate, seal, channel_name,
channel_ex, channel_em, media, calibrant, protein, replicate,
volume, mw_gmol1, concentration_ngul, well, the columns for the
fluorescence data, row, column). A number of arguments allow the tweaking
of the original data set. Following this, the data is reshaped, normalised,
trimmed of saturated points, summarised and used to fit a model for the
conversion factors from arbitrary to absolute units. Optional extras: the
sensitivity_plots argument extends this analysis to identify the limits of
detection and relative sensitivity and dynamic range of each gain. Plots are
saved to record the processed data at every step, allowing for visual sanity
checks and troubleshooting. A CSV file with the fitted conversion factors is
saved (along with the processed data if requested with more_csvs)."><title>Generate conversion factors for FP calibrations — generate_cfs • fpcountr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate conversion factors for FP calibrations — generate_cfs"><meta property="og:description" content="Generate conversion factors for fluorescent protein (FP) calibrations.
Originally based on flopr::generate_cfs() but with numerous changes. The
original function was intended for fluorescein and microsphere calibrations,
whereas this one can be used for any fluorescent calibrant, including
proteins. Takes as input a parsed CSV of fluorescence data of a dilution
series of FPs at one or more gains, that contains both data and metadata
columns (including: instrument, plate, seal, channel_name,
channel_ex, channel_em, media, calibrant, protein, replicate,
volume, mw_gmol1, concentration_ngul, well, the columns for the
fluorescence data, row, column). A number of arguments allow the tweaking
of the original data set. Following this, the data is reshaped, normalised,
trimmed of saturated points, summarised and used to fit a model for the
conversion factors from arbitrary to absolute units. Optional extras: the
sensitivity_plots argument extends this analysis to identify the limits of
detection and relative sensitivity and dynamic range of each gain. Plots are
saved to record the processed data at every step, allowing for visual sanity
checks and troubleshooting. A CSV file with the fitted conversion factors is
saved (along with the processed data if requested with more_csvs)."><meta property="og:image" content="https://ec363.github.io/fpcountr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fpcountr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/fpcountr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data_parsing.html">Data Parsing and Metadata</a>
    <a class="dropdown-item" href="../articles/expts_i_timecourse_cell.html">Experiments I: Timecourse Cellular Fluorescence</a>
    <a class="dropdown-item" href="../articles/path_lengths.html">Path Lengths</a>
    <a class="dropdown-item" href="../articles/plate_formatting_functions.html">Plate formatting functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ec363/fpcountr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate conversion factors for FP calibrations</h1>
      <small class="dont-index">Source: <a href="https://github.com/ec363/fpcountr/blob/HEAD/R/generate_cfs.R" class="external-link"><code>R/generate_cfs.R</code></a></small>
      <div class="d-none name"><code>generate_cfs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate conversion factors for fluorescent protein (FP) calibrations.
Originally based on <code><a href="https://rdrr.io/pkg/flopr/man/generate_cfs.html" class="external-link">flopr::generate_cfs()</a></code> but with numerous changes. The
original function was intended for fluorescein and microsphere calibrations,
whereas this one can be used for any fluorescent calibrant, including
proteins. Takes as input a parsed CSV of fluorescence data of a dilution
series of FPs at one or more gains, that contains both data and metadata
columns (including: <code>instrument</code>, <code>plate</code>, <code>seal</code>, <code>channel_name</code>,
<code>channel_ex</code>, <code>channel_em</code>, <code>media</code>, <code>calibrant</code>, <code>protein</code>, <code>replicate</code>,
<code>volume</code>, <code>mw_gmol1</code>, <code>concentration_ngul</code>, <code>well</code>, the columns for the
fluorescence data, <code>row</code>, <code>column</code>). A number of arguments allow the tweaking
of the original data set. Following this, the data is reshaped, normalised,
trimmed of saturated points, summarised and used to fit a model for the
conversion factors from arbitrary to absolute units. Optional extras: the
<code>sensitivity_plots</code> argument extends this analysis to identify the limits of
detection and relative sensitivity and dynamic range of each gain. Plots are
saved to record the processed data at every step, allowing for visual sanity
checks and troubleshooting. A CSV file with the fitted conversion factors is
saved (along with the processed data if requested with <code>more_csvs</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_cfs</span><span class="op">(</span></span>
<span>  <span class="va">calibration_csv</span>,</span>
<span>  more_csvs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  more_plots <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sensitivity_plots <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_only <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gain_fix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rename_from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rename_to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset_rows <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rows_to_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>,</span>
<span>  separator <span class="op">=</span> <span class="st">""</span>,</span>
<span>  complete_blank <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  outfolder <span class="op">=</span> <span class="st">"."</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>calibration_csv</dt>
<dd><p>character string. Path of the calibration data CSV
file.</p></dd>


<dt>more_csvs</dt>
<dd><p>logical. Optionally save all the intermediate tables in this
function. Defaults to FALSE.</p></dd>


<dt>more_plots</dt>
<dd><p>logical. Optionally save more plots. Defaults to FALSE.</p></dd>


<dt>sensitivity_plots</dt>
<dd><p>logical. Optionally adds a few extra columns to the
data such as the min/max normalised fluorescence and detectable molecules.
It also plots a few extra plots. Defaults to FALSE.</p></dd>


<dt>include_only</dt>
<dd><p>character string. If specified, only includes the
measures (column names) specified here.</p></dd>


<dt>exclude</dt>
<dd><p>character string. If specified, excludes any measures (column
names) specified here.</p></dd>


<dt>gain_fix</dt>
<dd><p>logical. Optionally add "0" before 2-digit gain names i.e.
'GFP 40' -&gt; 'GFP 040', or <code>blueblue 40</code> -&gt; <code>blueblue 040</code>- which fixes
ordering of plots. Defaults to FALSE.</p></dd>


<dt>rename_from</dt>
<dd><p>character string. Rename measures (column names)
containing character string <code>rename_from</code> to character string specified in
<code>rename_to</code>. Both <code>rename_from</code> and <code>rename_to</code> need to be completed to
trigger renaming.</p></dd>


<dt>rename_to</dt>
<dd><p>character string. Rename measures (column names) containing
character string <code>rename_from</code> to character string specified in
<code>rename_to</code>. Both <code>rename_from</code> and <code>rename_to</code> need to be completed to
trigger renaming.</p></dd>


<dt>subset_rows</dt>
<dd><p>logical. Should script take a subset of the rows (or whole
table)? Defaults to FALSE.</p></dd>


<dt>rows_to_keep</dt>
<dd><p>character array. If <code>subset_rows</code> is TRUE, script will
choose rows to keep from this list. Defaults to <code>c("C","D")</code>.</p></dd>


<dt>separator</dt>
<dd><p>character string that represents the separator between the
channel name and the gain value in the measures columns, e.g. for "GFP 40"
it is " ", for "GFP40" it is "" and for "GFP_40" it is "_". Required for
plotting the gain vs conversion factors. Defaults to "".</p></dd>


<dt>complete_blank</dt>
<dd><p>logical. Optionally adds "0" to the
<code>concentration_ngul</code> column for wells identified as blank (<code>protein</code> =
"none"). Useful if metadata is missing these values. Defaults to FALSE.</p></dd>


<dt>outfolder</dt>
<dd><p>character string. Path to folder where output files should
be saved. Defaults to current working directory.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">fitvals</span> <span class="op">&lt;-</span> <span class="fu">generate_cfs</span><span class="op">(</span></span></span>
<span class="r-in"><span>    calibration_csv <span class="op">=</span> <span class="st">"data_parsed.csv"</span>,</span></span>
<span class="r-in"><span>    subset_rows <span class="op">=</span> <span class="cn">TRUE</span>, rows_to_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span>,<span class="st">"D"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    outfolder <span class="op">=</span> <span class="st">"cfs_mCherry"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eszter Csibra.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

